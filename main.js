!function(){"use strict";var e=class{constructor(e,t,s){let{name:n,link:i}=e;this._name=n,this._link=i,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardImageEl.addEventListener("click",(()=>this._handleImageClick(this._name,this._link))),this._cardLikeButton.addEventListener("click",(()=>this._handleLikeIcon())),this._cardDeleteButton.addEventListener("click",(()=>this._handleDeleteCard()))}_handleLikeIcon(){this._cardLikeButton.classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_getElement(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getElement(),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._setEventListeners(),this._cardElement}},t=class{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}toggleButtonState(e){this._hasInvalidInput()?this._disableButton(this._submitButton,this._inactiveButtonClass):this._enableButton(this._submitButton,this._inactiveButtonClass)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this.toggleButtonState()}},s=class{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal__close")||e.target.classList.contains("modal_opened"))&&this.close()}))}},n=class extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputs=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=t}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}};const i=document.querySelector("#profile-edit-button"),r=document.querySelector("#profile-edit-modal"),o=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),a=document.querySelector("#profile-description-input"),l=(document.querySelector(".cards__list"),document.querySelector("#profile-add-button")),c=document.querySelector("#add-card-modal"),u={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},d=r.querySelector(".modal__form"),_=c.querySelector(".modal__form"),m=new t(u,d),h=new t(u,_);m.enableValidation(),h.enableValidation();const p=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:f},".cards__list");p.renderItems();const E=new n("#add-card-modal",(e=>{var t,s;t=e.title,s=e.url,f({name:t,link:s}),E.close()}));E.setEventListeners(),l.addEventListener("click",(()=>{h.resetValidation(),E.open(c)}));const v=new class{constructor(e,t){this._titleElement=document.querySelector(e),this._descriptionElement=document.querySelector(t)}getUserInfo(){return{title:this._titleElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(e,t){this._titleElement.textContent=e,this._descriptionElement.textContent=t}}(".profile__title",".profile__description"),S=new n("#profile-edit-modal",(function(e){v.setUserInfo(e.title,e.description),S.close()}));S.setEventListeners(),i.addEventListener("click",(()=>{m.resetValidation();const{title:e,description:t}=v.getUserInfo();o.value=e,a.value=t,S.open()}));const g=new class extends s{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#preview-image"),this._previewName=document.querySelector("#preview-name")}open(e,t){this._previewImage.src=e,this._previewImage.alt=t,this._previewName.textContent=t,super.open()}}("#preview-image-modal");function f(t){const s=function(t){return new e(t,"#card-template",(()=>{g.open(t.link,t.name)})).getView()}(t);p.addItem(s)}g.setEventListeners(),fetch("https://around-api.en.tripleten-services.com/v1",{headers:{authorization:"c56e30dc-2883-4270-a59e-b2f7bae969c6"}}).then((e=>e.json())).then((e=>{console.log(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0JBQWtCLEtBQ3ZESCxFQUFlMUQsS0FBSzZELEVBQVMvSCxLQUFNK0gsRUFBU2hJLEtBQUssSUFFaEN1QixTQUNyQixDQUdzQjRHLENBQVdILEdBQy9CN0IsRUFBWVEsUUFBUXNCLEVBQ3RCLENBWkFKLEVBQWVyRCxvQkFjZjRELE1BQU0sa0RBQW1ELENBQ3ZEQyxRQUFTLENBQ1BDLGNBQWUsMENBR2hCQyxNQUFNQyxHQUFRQSxFQUFJQyxTQUNsQkYsTUFBTUcsSUFDTEMsUUFBUUMsSUFBSUYsRUFBTyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKClcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUljb24oKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9nZXRFbGVtZW50KCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRFbGVtZW50KCk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbDtcclxuICAgIC8vIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHNldHRpbmdzLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVsKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbih0aGlzLl9zdWJtaXRCdXR0b24sIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9lbmFibGVCdXR0b24odGhpcy5fc3VibWl0QnV0dG9uLCB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIC8vIG5ldyBhZGQgYWZ0ZXIgcmV2aWV3XHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy8gb3BlbnMgcG9wdXBcclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gY2xvc2VzIHBvcHVwXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuXHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBsaXN0ZW5zIGZvciBlc2MgYnV0dG9uXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIikgfHxcclxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuLy8gY29uc3QgcHJvZmlsZUV4aXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZXhpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuLy8gY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4vLyBjb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1mb3JtXCJdO1xyXG5leHBvcnQgY29uc3QgY2FyZExpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcbi8vIGNvbnN0IGNhcmRUZW1wbGF0ZSA9XHJcbi8vICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbi8vIGV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcclxuLy8gZXhwb3J0IGNvbnN0IHByZXZpZXdNb2RhbENvbnRhaW5lciA9IHByZXZpZXdJbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXHJcbi8vICAgXCIubW9kYWxfX2NvbnRhaW5lci1wcmV2aWV3XCJcclxuLy8gKTtcclxuLy8gY29uc3QgcHJldmlld0ltYWdlRXhpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbi8vICAgXCIjcHJldmlldy1pbWFnZS1leGl0LWJ1dHRvblwiXHJcbi8vICk7XHJcbi8vIGV4cG9ydCBjb25zdCBjYXJkSW1hZ2VFbCA9IHByZXZpZXdNb2RhbENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4vLyAgIFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCJcclxuLy8gKTtcclxuLy8gY29uc3QgY2FyZE5hbWVFbCA9IHByZXZpZXdNb2RhbENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LW5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xyXG4vLyBjb25zdCBhZGRDYXJkRXhpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtZXhpdC1idXR0b25cIik7XHJcbi8vIGNvbnN0IGNhcmRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbi8vIGV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4vLyBjb25zdCBhZGRDYXJkRm9ybUVsID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbi8vIGNvbnN0IGNhcmRUaXRsZUlucHV0ID0gYWRkQ2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRpdGxlLWlucHV0XCIpO1xyXG4vLyBjb25zdCBjYXJkVXJsSW5wdXQgPSBhZGRDYXJkRm9ybS5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdXJsLWlucHV0XCIpO1xyXG5cclxuLy8gdmFsaWRhdGlvblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXHJcbn07XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbi8vIGltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgcHJvZmlsZUVkaXRNb2RhbCxcclxuICBwcm9maWxlVGl0bGUsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG4gIGNhcmRMaXN0RWwsXHJcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcclxuICBhZGRDYXJkTW9kYWwsXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8vIHZhbGlkYXRpb25cclxuXHJcbmNvbnN0IGVkaXRGb3JtRWwgPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmNvbnN0IGFkZEZvcm1FbCA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGVkaXRGb3JtRWwpO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBhZGRGb3JtRWwpO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vIG5ldyBTZWN0aW9uXHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuKTtcclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4vLyBuZXcgYWRkIGNhcmQgZm9ybVxyXG5cclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYWRkLWNhcmQtbW9kYWxcIiwgKG1vZGFsRGF0YSkgPT4ge1xyXG4gIGNvbnN0IG5hbWUgPSBtb2RhbERhdGEudGl0bGU7XHJcbiAgY29uc3QgbGluayA9IG1vZGFsRGF0YS51cmw7XHJcbiAgaGFuZGxlTmV3Q2FyZFN1Ym1pdChuYW1lLCBsaW5rKTtcclxufSk7XHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oYWRkQ2FyZE1vZGFsKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVOZXdDYXJkU3VibWl0KG5hbWUsIGxpbmspIHtcclxuICByZW5kZXJDYXJkKHsgbmFtZSwgbGluayB9KTtcclxuXHJcbiAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbi8vIG5ldyB1c2VyIGluZm9cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX3RpdGxlXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5cclxuLy8gbmV3IGVkaXQgcHJvZmlsZSBmb3JtXHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlRWRpdFByb2ZpbGVGb3JtU3VibWl0XHJcbik7XHJcblxyXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gdGl0bGU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcclxuXHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlRWRpdFByb2ZpbGVGb3JtU3VibWl0KG1vZGFsRGF0YSkge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKG1vZGFsRGF0YS50aXRsZSwgbW9kYWxEYXRhLmRlc2NyaXB0aW9uKTtcclxuICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbi8vIG5ldyBjYXJkc2VsZWN0b3JcclxuY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xyXG5cclxuLy8gbmV3IGltYWdlIHBvcHVwXHJcblxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgKCkgPT4ge1xyXG4gICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihjYXJkRGF0YS5saW5rLCBjYXJkRGF0YS5uYW1lKTtcclxuICB9KTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQuZ2V0VmlldygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxufVxyXG5cclxuZmV0Y2goXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLCB7XHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJjNTZlMzBkYy0yODgzLTQyNzAtYTU5ZS1iMmY3YmFlOTY5YzZcIixcclxuICB9LFxyXG59KVxyXG4gIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXHJcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICB9KTtcclxuXHJcbi8vIHZ2diBvbGQgdnZ2IC8vXHJcbi8qIEZ1bmN0aW9ucyAqL1xyXG5cclxuLy8gZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhsaW5rLCBuYW1lKSB7XHJcbi8vICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XHJcbi8vICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuLy8gICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVDbG9zZU9uRXNjYXBlKTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gY2xvc2VQb3B1cChtb2RhbCkge1xyXG4vLyAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbi8vICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlQ2xvc2VPbkVzY2FwZSk7XHJcbi8vIH1cclxuXHJcbi8vIGNsb3NlIGVzY2FwZVxyXG4vLyBmdW5jdGlvbiBoYW5kbGVDbG9zZU9uRXNjYXBlKGUpIHtcclxuLy8gICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuLy8gICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XHJcbi8vICAgICBjbG9zZVBvcHVwKG1vZGFsKTtcclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGNhcmREYXRhKSB7XHJcbi8vICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xyXG4vLyAgIGNvbnN0IGNhcmRJbWFnZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuLy8gICBjb25zdCBjYXJkVGl0bGVFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbi8vICAgY29uc3QgbGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbi8vICAgY29uc3QgZGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG5cclxuLy8gICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuLy8gICAgIGNhcmRFbGVtZW50LnJlbW92ZShcImNhcmRcIik7XHJcbi8vICAgfSk7XHJcblxyXG4vLyAgIGNhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbi8vICAgICBvcGVuTW9kYWwocHJldmlld0ltYWdlTW9kYWwpO1xyXG4vLyAgICAgcHJldmlld0ltYWdlRWwuc3JjID0gY2FyZERhdGEubGluaztcclxuLy8gICAgIHByZXZpZXdJbWFnZUVsLmFsdCA9IGNhcmREYXRhLm5hbWU7XHJcbi8vICAgICBwcmV2aWV3TmFtZUVsLnRleHRDb250ZW50ID0gY2FyZERhdGEubmFtZTtcclxuLy8gICB9KTtcclxuXHJcbi8vICAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4vLyAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4vLyAgIH0pO1xyXG5cclxuLy8gICBjYXJkSW1hZ2VFbC5zcmMgPSBjYXJkRGF0YS5saW5rO1xyXG4vLyAgIGNhcmRJbWFnZUVsLmFsdCA9IGNhcmREYXRhLm5hbWU7XHJcbi8vICAgY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xyXG5cclxuLy8gICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbi8vIH1cclxuXHJcbi8vIG5ldyBoYW5kbGVpbWFnZWNsaWNrIGZ1bmN0aW9uXHJcblxyXG4vLyBmdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcclxuLy8gICBvcGVuTW9kYWwocHJldmlld0ltYWdlTW9kYWwpO1xyXG4vLyAgIC8vIGNhcmRJbWFnZUVsLnNyYyA9IGxpbms7XHJcbi8vICAgLy8gY2FyZEltYWdlRWwuYWx0ID0gbmFtZTtcclxuLy8gICAvLyBjYXJkTmFtZUVsLnRleHRDb250ZW50ID0gbmFtZTtcclxuLy8gfVxyXG5cclxuLyogRXZlbnQgSGFuZGxlcnMgKi9cclxuXHJcbi8vIGZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlRm9ybVN1Ym1pdChlKSB7XHJcbi8vICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4vLyAgIHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudCA9IHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlO1xyXG4vLyAgIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xyXG4vLyAgIGNsb3NlUG9wdXAocHJvZmlsZUVkaXRNb2RhbCk7XHJcblxyXG4vLyAgIC8vIG5ldyBhZGQgYWZ0ZXIgcmV2aWV3XHJcbi8vICAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGUpIHtcclxuLy8gICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbi8vICAgY29uc3QgbmFtZSA9IGNhcmRUaXRsZUlucHV0LnZhbHVlO1xyXG4vLyAgIGNvbnN0IGxpbmsgPSBjYXJkVXJsSW5wdXQudmFsdWU7XHJcbi8vICAgcmVuZGVyQ2FyZCh7IG5hbWUsIGxpbmsgfSwgY2FyZExpc3RFbCk7XHJcbi8vICAgY2xvc2VQb3B1cChhZGRDYXJkTW9kYWwpO1xyXG4vLyAgIGFkZENhcmRGb3JtRWwucmVzZXQoKTtcclxuLy8gICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbi8vIH1cclxuXHJcbi8qIEV2ZW50IExpc3RlbmVycyAqL1xyXG5cclxuLy8gY2xvc2UgcG9wdXBzIG92ZXJsYXlcclxuXHJcbi8vIGNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XHJcblxyXG4vLyBwb3B1cHMuZm9yRWFjaCgocG9wdXApID0+IHtcclxuLy8gICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuLy8gICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xyXG4vLyAgICAgICBjbG9zZVBvcHVwKHBvcHVwKTtcclxuLy8gICAgIH1cclxuLy8gICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKSkge1xyXG4vLyAgICAgICBjbG9zZVBvcHVwKHBvcHVwKTtcclxuLy8gICAgIH1cclxuLy8gICB9KTtcclxuLy8gfSk7XHJcblxyXG4vLyBwcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4vLyAgIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xyXG4vLyAgIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xyXG4vLyAgIG9wZW5Nb2RhbChwcm9maWxlRWRpdE1vZGFsKTtcclxuLy8gfSk7XHJcblxyXG4vLyBwcm9maWxlRXhpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VQb3B1cChwcm9maWxlRWRpdE1vZGFsKSk7XHJcblxyXG4vLyBwcm9maWxlRWRpdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXQpO1xyXG5cclxuLy8gYWRkQ2FyZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCk7XHJcblxyXG4vLyBhZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBvcGVuTW9kYWwoYWRkQ2FyZE1vZGFsKSk7XHJcblxyXG4vLyBhZGRDYXJkRXhpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VQb3B1cChhZGRDYXJkTW9kYWwpKTtcclxuXHJcbi8vIHByZXZpZXdJbWFnZUV4aXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbi8vICAgY2xvc2VQb3B1cChwcmV2aWV3SW1hZ2VNb2RhbClcclxuLy8gKTtcclxuXHJcbi8vIGluaXRpYWxDYXJkcy5mb3JFYWNoKChjYXJkRGF0YSkgPT4ge1xyXG4vLyAgIHJlbmRlckNhcmQoY2FyZERhdGEsIGNhcmRMaXN0RWwpO1xyXG4vLyB9KTtcclxuIiwiY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih0aXRsZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRpdGxlU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlckluZm8gPSB7XHJcbiAgICAgIHRpdGxlOiB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHVzZXJJbmZvO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8odGl0bGUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZVwiKTtcclxuICAgIHRoaXMuX3ByZXZpZXdOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW5hbWVcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGxpbmssIG5hbWUpIHtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcmV2aWV3TmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcclxuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJuYW1lIiwibGluayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRJbWFnZUVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jYXJkTGlrZUJ1dHRvbiIsIl9oYW5kbGVMaWtlSWNvbiIsIl9jYXJkRGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJfZ2V0RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiX2NhcmRUaXRsZUVsIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJzZXR0aW5ncyIsImZvcm1FbCIsIl9mb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJldmVyeSIsIl9lbmFibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9kaXNhYmxlQnV0dG9uIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2lucHV0cyIsIl9oYW5kbGVGb3JtU3VibWl0IiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImFkZENhcmRNb2RhbCIsInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImVkaXRGb3JtRWwiLCJhZGRGb3JtRWwiLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJyZW5kZXJDYXJkIiwibmV3Q2FyZFBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsIm1vZGFsRGF0YSIsInRpdGxlIiwidXJsIiwidXNlckluZm8iLCJ0aXRsZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsIl90aXRsZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiZ2V0VXNlckluZm8iLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwiZWRpdFByb2ZpbGVQb3B1cCIsInBvcHVwV2l0aEltYWdlIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3TmFtZSIsImNhcmREYXRhIiwiY2FyZEVsZW1lbnQiLCJDYXJkIiwiY3JlYXRlQ2FyZCIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwicmVzIiwianNvbiIsInJlc3VsdCIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6IiJ9